<script>
    // NOTIFICACIONES
        const ICONO_CHECK = 'bi-check2-square';
        const ICONO_PAPELERA = 'bi-trash';
        const ICONO_CONTACTO = 'bi-person-plus-fill';
        const ICONO_ERROR = 'bi-bug';
        const ICONO_ADVERTENCIA = 'bi-exclamation-square';
        
  
        const LOTTIE_CHECK = "https://lottie.host/f1b3fedc-c7d8-45e7-bfe2-fb03101419cb/JqH5z6jKBv.json"//"https://assets3.lottiefiles.com/packages/lf20_jbrw3hcz.json";
        const LOTTIE_PAPELERA = "https://lottie.host/ff176429-e5b1-4af3-8a21-93bd3480d3b1/2gzSM8D2l2.json"//"https://assets8.lottiefiles.com/packages/lf20_touohxv0.json";
        const LOTTIE_CONTACTO = "https://lottie.host/e3c59bf6-ea81-4395-9bca-84664cdd4773/ip3XzOCLKm.json"//"https://assets1.lottiefiles.com/packages/lf20_yr6zz3wv.json";
        const LOTTIE_ERROR = "https://lottie.host/96d83537-330e-4fee-b787-e5e56a133241/6zvGiTaVih.json" //"https://assets10.lottiefiles.com/packages/lf20_j1adxtyb.json";
        const LOTTIE_ADVERTENCIA = "https://lottie.host/043907e1-399a-436b-84f1-ea3c318c7de0/iG2FZx5rXB.json"//"https://assets2.lottiefiles.com/packages/lf20_khzniaya.json";

// Notificaciones
function crearNotificacionOK(mensaje, titulo){
    //crearNotificacion(titulo,mensaje,ICONO_CHECK,'--color-verde-oscuro');
crearNotificacion(titulo,mensaje,LOTTIE_CHECK,'--color-verde-oscuro');
}

function crearNotificacionError(mensaje, titulo){
    //crearNotificacion(titulo,mensaje,ICONO_ERROR,'--color-rojo-oscuro');
     crearNotificacion(titulo,mensaje,LOTTIE_ERROR,'--color-rojo-oscuro');
}

function crearNotificacionContacto(mensaje, titulo)
{
    //crearNotificacion(titulo,mensaje,ICONO_CONTACTO,'--color-azul-oscuro');
    crearNotificacion(titulo,mensaje,LOTTIE_CONTACTO,'--color-azul-oscuro');
}   

function crearNotificacionAdvertencia(mensaje, titulo){
    //crearNotificacion(titulo,mensaje,ICONO_ADVERTENCIA,'--color-amarillo-oscuro');
    crearNotificacion(titulo,mensaje,LOTTIE_ADVERTENCIA,'--color-amarillo-oscuro');
}
function crearNotificacionBorrar(mensaje, titulo){
    //crearNotificacion(titulo,mensaje,ICONO_PAPELERA,'--color-gris-oscuro');
    crearNotificacion(titulo,mensaje,LOTTIE_PAPELERA,'--color-gris-oscuro');
}
   
//function crearNotificacion(titulo,mensaje,icono,color){
    function crearNotificacion(titulo,mensaje,lottie,color){


    // código de la notificación
let notificacion = crearAtributosNotificacion();
let cabeceraNotificacion = crearCabeceraNotificacion(titulo,lottie);
let cuerpoNotificacion = crearCuerpoNotificacion(mensaje);

// añadimos la cabecera y el cuerpo a la notificación
notificacion.appendChild(cabeceraNotificacion);
notificacion.appendChild(cuerpoNotificacion);

// establecer color de fondo según el tipo de notificación
notificacion.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue(color);  

// evento
notificacion.addEventListener('hidden.bs.toast', function () {
    this.remove();
});

// añadimos la notificación al contenedor
document.getElementById("contenedorNotificaciones").appendChild(notificacion);


// mostramos la notificación
bootstrap.Toast.getOrCreateInstance(notificacion).show();

}

function crearCuerpoNotificacion(mensaje)
{
    let cuerpoNotificacion = document.createElement("div");
    cuerpoNotificacion.classList.add("toast-body");
    cuerpoNotificacion.textContent = mensaje;

    return cuerpoNotificacion;
}

function crearAtributosNotificacion(){
    let notificacion = document.createElement("div");
    notificacion.classList.add("toast","align-items-center","text-white","border-0");
    notificacion.setAttribute("role","alert");
    notificacion.setAttribute("aria-live","assertive");
    notificacion.setAttribute("aria-atomic","true");

    return notificacion;
}

// Cabecera de la notificación
//function crearCabeceraNotificacion(titulo,icono){
    function crearCabeceraNotificacion(titulo,lottie){

    //creamos la cabecera
    let cabeceraNotificacion = document.createElement("div");
        cabeceraNotificacion.classList.add("toast-header","p-0");

    //creamos el icono, pasando el contenedor y el icono
    //crearIconoNotificacion(cabeceraNotificacion,icono);
    crearLottieNotificacion(cabeceraNotificacion, lottie)

    //creamos el título
    let tituloNotificacion = document.createElement("strong");
    tituloNotificacion.classList.add("mx-2");
    tituloNotificacion.textContent = titulo;

    cabeceraNotificacion.appendChild(tituloNotificacion);

    return cabeceraNotificacion;

}

// Icono de la notificación
function crearIconoNotificacion(contenedor, icono){
    let divIcono = document.createElement("div");
    let iconoNotificacion = document.createElement("i");
    divIcono.classList.add("icono-notificacion");
    iconoNotificacion.classList.add("bi",icono);

    divIcono.appendChild(iconoNotificacion);
    contenedor.appendChild(divIcono);

}


// Lottie de la notificación
function crearLottieNotificacion(contenedor, lottie){
    let divIcono = document.createElement("div");
    let iconoNotificacion = document.createElement("lottie-player");
    
    // atributosd del lottie
    iconoNotificacion.setAttribute("src", lottie);
    iconoNotificacion.setAttribute("background", "transparent");    
    iconoNotificacion.setAttribute("speed", "1");
    iconoNotificacion.style.width = ("3rem;");
    iconoNotificacion.style.height = ("3rem");
    //iconoNotificacion.setAttribute("loop", "");
    iconoNotificacion.setAttribute("autoplay", "");

    divIcono.appendChild(iconoNotificacion);
    contenedor.appendChild(divIcono);

}
</script>